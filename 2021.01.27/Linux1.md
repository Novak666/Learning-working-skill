# 1. 初识Linux

## 1.1 操作系统

操作系统(Operation System, OS)，是管理[计算机](https://baike.baidu.com/item/计算机)[硬件](https://baike.baidu.com/item/硬件)与[软件](https://baike.baidu.com/item/软件)资源的[计算机程序](https://baike.baidu.com/item/计算机程序)，同时也是计算机系统的内核与基石。操作系统需要处理如管理与配置[内存](https://baike.baidu.com/item/内存)、决定[系统资源](https://baike.baidu.com/item/系统资源/974435)供需的优先次序、控制[输入设备](https://baike.baidu.com/item/输入设备/10823368)与[输出设备](https://baike.baidu.com/item/输出设备/10823333)、操作网络与管理文件系统等基本事务。操作系统也提供一个让用户与系统交互的操作界面。

## 1.2 Linux简介

**基本思想**

Linux的基本思想有两点：

第一：一切都是文件

第二：每个软件都有确定的用途

**完全免费**

**完全兼容POSIX1.0标准**

**多用户、多任务**

**良好的界面**

**支持多种平台**

**优点**

1)Linux由众多微内核组成，其源代码完全开源

2)Linux继承了Unix的特性，具有非常强大的网络功能，其支持所有的因特网协议，包括TCP/[IPv4](https://baike.baidu.com/item/IPv4/422599)、 [TCP](https://baike.baidu.com/item/TCP/33012)/IPv6和链路层拓扑程序等，且可以利用Unix的网络特性开发出新的协议栈

3)Linux系统工具链完整，简单操作就可以配置出合适的开发环境，可以简化开发过程，减少开发中仿真工具的障碍，使系统具有较强的移植性

![1](https://raw.githubusercontent.com/Novak666/Learning-working-skill/main/2021.01.27/pics/1.png)

# 2. Linux系统与设置命令

## 2.1 前言

```
命令我们可以理解成在Windows中我们常常为了查看ip输入的ipconfig，在Linux中也有很多的命令，比如操作目录、文件、网络、磁盘等等命令
```

- Linux刚面世时并没有图形界面, 所有的操作全靠命令完成, 如 **磁盘操作、文件存取、目录操作、进程管理、文件权限** 设定等
- 在职场中，大量的 **服务器维护工作** 都是在 远程 通过SSH客户端 来完成的， 并没有图形界面， 所有的维护工作都需要通过命令来完成

在职场中，作为后端程序员或者运维，必须要或多或少的掌握一些Linux常用的终端命令

- Linux发行版本的命令大概有200多个， 但是常用的命令只有几十个而已

```
总结
学习终端命令的技巧：
- 不需要死记硬背， 对于常用命令， 记住语法是关键，在用的时候去查下参数选项，有的很常用的命令，用的多自然就记住了
- 不要尝试一次学会所有的命令， 有些命令是非常不常用的，临时遇到，就去根据语法找参数选项
```

## 2.2 Linux 用户和用户组管理

### 2.2.1 Linux账号管理

#### 1) 添加用户

**使用者权限：管理员用户**

```shell
useradd 选项 用户名
```

需要先转到root用户

```shell
su root
```

#### 2) 用户口令

用户管理的一项重要内容是用户口令的管理。用户账号刚创建时没有口令，但是被系统锁定，无法使用，必须为其指定口令后才可以使用

**使用者权限：管理员用户**

指定和修改用户口令的Shell命令是`passwd`。超级用户可以为自己和其他用户指定口令，普通用户只能用它修改自己的口令。命令的格式为：

```shell
passwd 选项 用户名
```

#### 3) 修改用户

usermod 命令通过修改系统帐户文件来修改用户账户信息

修改用户账号就是根据实际情况更改用户的有关属性，如用户号、主目录、用户组、登录Shell等。

**使用者权限：管理员用户**

修改已有用户的信息使用`usermod`命令，其格式如下：

```shell
usermod 选项 用户名
```

#### 4) 删除用户

假如我们其中一个用户的账号不再使用，可以从系统中删除。删除用户账号就是要将/etc/passwd等系统文件中的该用户记录删除，必要时还删除用户的主目录。

**使用者权限：管理员用户**

删除一个已有的用户账号使用`userdel`命令，其格式如下：

```shell
userdel 选项 用户名
```

-f：强制删除用户，即使用户当前已登录;

-r：删除用户的同时，删除与用户相关的所有文件

### 2.2.2 Linux用户组

#### 1) 增加用户组

新增一个用户组（组名可见名知意，符合规范即可），然后将用户添加到组中

**使用者权限：管理员用户** 

```shell
groupadd 选项 用户组
```

#### 2) 修改用户组

**使用者权限：管理员用户**

```shell
groupmod 选项 用户组
```

#### 3) 查询用户所属组

```shell
groups 用户名
```

#### 4) 删除用户组

**使用者权限：管理员用户**

要删除一个已有的用户组，使用groupdel命令，其格式如下

```shell
groupdel 用户组
```

### 2.2.3 将用户添加到组

1、创建一个新的组，并添加组ID（需要切换到root用户）

```shell
groupadd -g 8888 itbj2020group
```

2、创建3个用户（需要切换到root用户）

```shell
 useradd  itbeijinguser1
 useradd  itbeijinguser2
 useradd  itbeijinguser3
```

3、将上面三个用户添加到组itbj2020group

我们通过passwd命令将三个用户添加到组

**什么是gpasswd：**

gpasswd 是 Linux 下工作组文件 /etc/group 和 /etc/gshadow 管理工具，用于将一个用户添加到组或者从组中删除。

语法

```shell
gpasswd [可选项] 组名
```

**将上面的三个用户使用gpasswd添加到组（需要切换到root用户）**

```shell
gpasswd -a itbeijinguser1 itbj2020group
gpasswd -a itbeijinguser2 itbj2020group
gpasswd -a itbeijinguser3 itbj2020group
```

**查看用户组下所有用户（所有用户）**

> 注意 此处的grep命令我们将在文件管理章节详细讲解，这里先使用它查看下效果

```shell
grep 'itbj2020group' /etc/group
```

## 2.3 Linux系统管理

### 2.3.1 日期管理

**语法如下：**

```shell
date [参数选项]
```

### 2.3.2 显示用户

logname命令用于显示用户名称。

执行logname指令，它会显示目前用户的名称

**语法为如下：**

```shell
logname [--help][--version]
```

### 2.3.3 切换账户

su命令用于变更为其他使用者的身份，除 root 外，需要键入该使用者的密码。

使用权限：所有使用者。

**语法如下：**

```shell
su 
```

变更帐号为 root 并在执行 ls 指令后退出返回原使用者

```shell
 su -c ls root
```

<font color='red'>su - root和su root的区别</font>

### 2.3.4 id命令

 id命令用于显示用户的ID，以及所属群组的ID。

id会显示用户以及所属群组的实际与有效ID。若两个ID相同，则仅显示实际ID。若仅指定用户名称，则显示目前用户的ID。

使用者权限：所有用户

**语法**

```
id [-gGnru][--help][--version][用户名称]
```

### 2.3.5 sudo执行

```
比如我们使用普通用户操作用户或者操作用户组、以及修改网卡配置文件的时候，需要切换到root用户才操作，此时我们可以使用sudo命令提高普通用户的操作权限，以达到操作目的
```

sudo：控制用户对系统命令的使用权限，root允许的操作。

### 2.3.6 top命令

```
在企业级开发中，开发人员（运维人员也会经常使用）常常为了查看服务器上运行的程序占用的CPU情况以及占用内存情况，目的就是检测我们的程序是否在正常范围内运行
```

top命令用于实时显示 process 的动态。

使用权限：所有使用者。

**显示进程信息**

```shell
top
```

**各进程（任务）的状态监控属性解释说明：**
PID — 进程id
USER — 进程所有者
PR — 进程优先级
NI — nice值。负值表示高优先级，正值表示低优先级
VIRT — 进程使用的虚拟内存总量，单位kb。VIRT=SWAP+RES
RES — 进程使用的、未被换出的物理内存大小，单位kb。RES=CODE+DATA
SHR — 共享内存大小，单位kb
S — 进程状态。D=不可中断的睡眠状态 R=运行 S=睡眠 T=跟踪/停止 Z=僵尸进程
%CPU — 上次更新到现在的CPU时间占用百分比
%MEM — 进程使用的物理内存百分比
TIME+ — 进程使用的CPU时间总计，单位1/100秒
COMMAND — 进程名称（命令名/命令行）

**显示完整命令，与top命令不同的就是command属性像是进行了命令补全**

```shell
top -c
```

**显示指定的进程信息，以下显示进程号为6972的进程信息，CPU、内存占用率等**

```shell
 top -p 6972
```

> top命令的用法很多
>
> 但是常用的就是top（不带参数），有的时候，在进程比较多的时候，我们常常记住进程的pid，然后通过top -p pid进行查看
>
> 也就是说，top+ top -p是经常被用到的

### 2.3.7 ps命令

```
ps命令类似于我们在Windows中通过任务管理器查看进程信息
```

Linux ps命令用于显示当前进程 (process) 的状态信息

使用者权限：所有用户

**语法如下：**

```shell
ps 
```

显示进程信息

```shell
ps -A 
```

显示指定用户信息

```powershell
 ps -u itcast
```

显示所有进程信息 

```shell
ps -ef 
```

显示指定进程信息 

```shell
ps -ef|grep XXX
```

### 2.3.8 kill命令

Linux kill命令用于删除执行中的程序或工作(可强制中断)

使用者权限：所有用户

**语法如下：**

```shell
kill [-s <信息名称或编号>][程序]　或　kill [-l <信息编号>]
```

 **参数说明**：

- -l <信息编号> 　若不加<信息编号>选项，则-l参数会列出全部的信息名称。
- -s <信息名称或编号> 　指定要送出的信息。
- [程序] 　[程序]可以是程序的PID或是PGID，也可以是工作编号。

杀死一个进程

```shell
 kill 15642
```

强制杀死进程

```shell
kill -KILL 15642
```

彻底杀死进程

```shell
kill -9 15642
```

杀死指定用户所有进程

1.方法一 过滤出itcast用户进程 

```shell
kill -9 $(ps -ef | grep itcast) 
```

2.方法二，直接杀死

```shell
kill -u itcast
```

> 注意
>
> 上面列举了很多kill进程的命令
>
> 但是我们我们常用的就是kill -9命令，我们常常找到进程的pid
>
> 然后通过kill -9进行杀死进程

### 2.3.9 关机命令

shutdown命令可以用来进行关闭系统，并且在关机以前传送讯息给所有使用者正在执行的程序，shutdown 也可以用来重开机

使用者权限：管理员用户

**语法如下：**

```shell
shutdown [-t seconds] [-rkhncfF] time [message]
```

立即关机

```shell
shutdown -h now
或者
shudown
```

指定1分钟后关机，1分钟关机并显示警告信息

```shell
shutdown +1 “System will shutdown after 1 minutes” 
```

指定1分钟后重启，并发出警告信息

```shell
shutdown –r +1 “1分钟后关机重启”
```

### 2.3.10 重启命令

reboot命令用于用来重新启动计算机

使用者权限：管理员、普通（需要验证）用户

**语法如下：**

开始重新启动

```shell
reboot
```

### 2.3.11 who命令

who命令用于显示系统中有哪些使用者正在上面，显示的资料包含了使用者 ID、使用的终端机、从哪边连上来的、上线时间、呆滞时间、CPU 使用量、动作等等

使用者权限：所有使用者都可使用。

显示当前登录系统的用户

```shell
who
```

显示明细(标题)信息

```shell
who -H
```

### 2.3.12 timedatectl命令

要开始自动时间同步到远程NTP服务器，在终端键入以下命令。

```shell
timedatectl set-ntp true
```

### 2.3.13 clear命令

 clear命令用于清除屏幕

使用者权限：所有使用者都可使用。

**语法**

```shell
clear
```

# 3. Linux目录管理

## 3.1 常用命令

- ls:         列出目录
- cd：     切换目录
- pwd：  显示目前的目录
- mkdir：创建一个新的目录
- rmdir：删除一个空的目录
- cp:         复制文件或目录
- rm:        移除文件或目录
- mv:        移动文件与目录或修改文件与目录的名称

### 3.1.1 ls (列出目录)

总结
以上三种是经常被使用到的命令
它们之间的区别是
ls  显示不隐藏的文件与文件夹
ls -l 显示不隐藏的文件与文件夹的详细信息
ls -al   显示所有文件与文件夹的详细信息

### 3.1.2 pwd显示当前目录

pwd 是 **Print Working Directory** 的缩写，也就是显示目前所在当前目录的命令。

使用者权限：所有使用者都可使用。

**查看当前所在目录**

```
pwd -P
```

### 3.1.3 cd (切换目录)

cd是Change Directory的缩写，这是用来变换工作目录的命令

使用者权限：所有使用者都可使用。

**语法如下：**

```
 cd [相对路径或绝对路径]
```

说明

- **相对路径** 在输入路径时, 最前面不是以 `/` 开始的 , 表示相对 **当前目录** 所在的目录位置
- **绝对路径** 在输入路径时, 最前面是以 `/`  开始的, 表示 从 **根目录** 开始的具体目录位置

### 3.1.4 mkdir(创建目录)

mkdir命令用于建立名称为 dirName 之子目录

使用权限：于目前目录有适当权限的所有使用者

**语法**

```
mkdir [-p] dirName
```

**参数说明：**

- -p 确保目录名称存在，不存在的就建一个

### 3.1.5 rmdir(删空目录)

rmdir命令删除空的目录

使用权限：于目前目录有适当权限的所有使用者。

**语法**

```shell
rmdir [-p] dirName
```

**参数**：

- -p 是当子目录被删除后使它也成为空目录的话，则顺便一并删除

### 3.1.6 rm(删除目录)

rm命令用于删除一个文件或者目录。

使用权限：于目前目录有适当权限的所有使用者

**语法**

```shell
rm [options] name...
```

**参数：**

- -i 删除前逐一询问确认。
- -f 即使原档案属性设为唯读，亦直接删除，无需逐一确认。
- -r 将目录及以下之档案亦逐一删除。

### 3.1.7 cp(文件复制)

cp命令主要用于复制文件或目录。

使用权限：于目前目录有适当权限的所有使用者

**语法**

```shell
cp [options] source dest
```

或

```shell
cp [options] source... directory
```



```shell
cp –r aaa/*  c
```

执行效果如下

我们将aaa下面的所有文件、目录复制到了目录c下面9

> 总结：
>
> 用户使用该指令复制目录时，必须使用参数"-r"或者"-R"。
>
> 如果不加参数"-r"或者"-R",只复制文件，而略过目录

### 3.1.8 mv(移动文件)

mv 命令用来为文件或目录改名、或将文件或目录移入其它位置

**语法**

```shell
mv [options] source dest
mv [options] source... directory
```

## 3.2 Linux文件基本属性

在Linux中我们可以使用ll或者ls –l命令来显示一个文件的属性以及文件所属的用户和组，如：

```shell
ls -l
```

在Linux中第一个字符代表这个文件是目录、文件或链接文件等等。

- 当为[ **d** ]则是目录
- 当为[ **-** ]则是文件；
- 若是[ **l** ]则表示为链接文档(link file)；
- 若是[ **b** ]则表示为装置文件里面的可供储存的接口设备(可随机存取装置)；
- 若是[ **c** ]则表示为装置文件里面的串行端口设备，例如键盘、鼠标(一次性读取装置)。

接下来的字符中，以三个为一组，且均为『rwx』 的三个参数的组合。其中，[ r ]代表可读(read)、[ w ]代表可写(write)、[ x ]代表可执行(execute)。 要注意的是，这三个权限的位置不会改变，如果没有权限，就会出现减号[ - ]而已。

每个文件的属性由左边第一部分的10个字符来确定（如下图）。

![2](https://raw.githubusercontent.com/Novak666/Learning-working-skill/main/2021.01.27/pics/2.png)

## 3.3 Linux文件基本属性

### 3.3.1 chgrp更改属组

chgrp命令用于变更文件或目录的所属群组。

文件或目录权限的的拥有者由所属群组来管理。您可以使用chgrp指令去变更文件与目录的所属群组，设置方式采用群组名称或群组识别码皆可

为了方便初学者记忆，可以将 chgrp 理解为是 "change group" 的缩写

**语法如下**

```
chgrp [-cfhRv][--help][--version][所属群组][文件或目录...] 或 chgrp [-cfhRv][--help][--reference=<参考文件或目录>][--version][文件或目录...]
```

我们现在通过chgrp命令将文件aaa的属组更改成root（其他也可以）

```shell
chgrp -v root aaa
```

### 3.3.2 chown更改属主和属组

使用权限 : 管理员账户

**语法如下**

```
chown [–R] 属主名 文件名
chown [-R] 属主名：属组名 文件名
```

-R表示包括了文件夹及其所有

### 3.3.3 chmod权限命令

#### **1) 数字权限**

Linux文件的基本权限就有九个，分别是owner/group/others三种身份各有自己的read/write/execute权限。

各权限的数字对照表：[r]:4;[w]:2;[x]:1;[-]:**0

![3](https://raw.githubusercontent.com/Novak666/Learning-working-skill/main/2021.01.27/pics/3.png)

每种身份(owner/group/others)各自的三个权限(r/w/x)分数是需要累加的，例如当权限为： [-rwxrwx---] 分数则是：

- owner = rwx = 4+2+1 = 7
- group = rwx = 4+2+1 = 7
- others= --- = 0+0+0 = 0

所以等一下我们设定权限的变更时，该文件的权限数字就是770啦,变更权限的指令chmod的语法是这样的

```
chmod [-R] xyz 文件或目录
```

选项与参数：

- xyz : 就是刚刚提到的数字类型的权限属性，为 rwx 属性数值的相加。
- -R : 进行递归(recursive)的持续变更，亦即连同次目录下的所有文件都会变更

上面的 可以表示如下

```shell
chmod  -R 770     档案或目录
```

#### 2) 符号权限

还有一个改变权限的方法，就是 符号权限，我们先回顾下之前提到的9个权限

- (1)user     属主权限
- (2)group  属组权限
- (3)others  其他权限

那么我们就可以使用 **u, g, o** 来代表三种身份的权限！

此外， **a** 则代表 **all**，即全部的身份。读写的权限可以写成 **r, w, x**，也就是可以使用下表的方式来看

![4](https://raw.githubusercontent.com/Novak666/Learning-working-skill/main/2021.01.27/pics/4.png)

如果我们需要将文件权限设置为 **-rwxr-xr--** ，可以使用 **chmod u=rwx,g=rx,o=r 文件名** 来设定:

上接上面的例子，如下图

我们将as.txt的权限设置为**-rwxr-xr--**

执行

```shell
chmod u=rwx,g=rx,o=r  as.txt
```

假如我们要将权限去掉而不改变其他已存在的权限呢？举个例子，比如我要拿掉全部人的可读权限，则

```SHELL
 chmod  a-r as.txt
```

## 3.4 总结

在企业级开发过程中，实际操作目录是最经常出现的，对于目录常用命令我们要熟练掌握并能熟练编写
因为Linux是多用户系统，所以权限也是非常核心和重要的，我们要熟练编写权限（属主、属组、其他权限）的常用命令。